---
import fs from "node:fs";
import path from "node:path";
import matter from "gray-matter";

const postsDir = path.resolve("src/content/news");
const files = fs.existsSync(postsDir) ? fs.readdirSync(postsDir).filter(f => f.endsWith(".md")) : [];
const posts = files.map(f => {
  const raw = fs.readFileSync(path.join(postsDir, f), "utf-8");
  const { data } = matter(raw);
  return { ...data };
}).sort((a,b)=> new Date(b.date) - new Date(a.date));
---
<html lang="ja">
  <head><meta charset="utf-8" /><title>お知らせ</title></head>
  <body>
    <h1>お知らせ</h1>
    <ul>
      {posts.map(p => (
        <li><strong>{p.title}</strong>（{new Date(p.date).toLocaleDateString("ja-JP")}）</li>
      ))}
    </ul>
    <p><a href="/admin/">管理画面（CMS）</a> / <a href="/">トップへ</a></p>
  </body>
</html>
